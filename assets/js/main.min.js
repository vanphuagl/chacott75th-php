"use strict";function raf(e){lenis.raf(e),requestAnimationFrame(raf)}const init=()=>{gsap.registerPlugin(ScrollTrigger,ScrollToPlugin),ScrollTrigger.clearScrollMemory("manual"),ScrollTrigger.refresh(),window.innerWidth<1024&&ScrollTrigger.config({autoRefreshEvents:"visibilitychange,DOMContentLoaded,load"}),appHeight(),document.getElementById("homepage")&&(initLoader(),scrollEvents());new LazyLoad({threshold:0});sessionStorage.setItem("opening-displayed",!0)},lenis=new Lenis({lerp:.05,smoothWheel:!0});lenis.on("scroll",ScrollTrigger.update),requestAnimationFrame(raf);const initLoader=()=>{lenis.stop();const e=gsap.timeline({onComplete:()=>{lenis.start()}});"true"===sessionStorage.getItem("opening-displayed")?(document.querySelector("[data-loading]").remove(),lenis.start(),e.to("[data-fv], [data-scrolldown]",{opacity:1})):e.to("[data-loading-logo]",{opacity:1,duration:1,delay:1,ease:Power4.easeInOut}).to("[data-loading-overlay]",{top:0,duration:1.8,delay:1,ease:Power4.easeOut}).to("[data-loading]",{opacity:0},"-=0.5").to("[data-loading]",{zIndex:"-100"})},appHeight=()=>{const e=document.documentElement;e.style.setProperty("--app-height",`${document.documentElement.clientHeight}px`)};window.addEventListener("resize",appHeight);const scrollEvents=()=>{let e=gsap.matchMedia(),t=1024;e.add({isDesktop:`(min-width: ${t}px)`,isMobile:`(max-width: ${t-1}px)`},e=>{let{isMobile:t}=e.conditions;ScrollTrigger.create({trigger:"[data-offset-top]",start:"top+=50 top",end:"top top",toggleActions:"play none reverse none",markers:!1,onEnter:()=>{t&&gsap.to("[data-scrolldown]",{opacity:0,duration:.2})},onEnterBack:()=>{t&&gsap.to("[data-scrolldown]",{opacity:1,duration:.2})}}),ScrollTrigger.create({trigger:"[data-anni]",start:"top bottom",end:"top bottom",markers:!1,invalidateOnRefresh:!0,onEnter:()=>{gsap.to(".top_chacott_inner, [data-scrolldown]",{opacity:0,duration:.2})},onEnterBack:()=>{gsap.to(".top_chacott_inner, [data-scrolldown]",{opacity:1,duration:.2})}}),t&&ScrollTrigger.create({trigger:"[data-top-chacott]",start:"bottom bottom",end:"bottom bottom",markers:!1,invalidateOnRefresh:!0,onEnter:()=>{gsap.to("[data-scrolldown]",{opacity:1,duration:.2})},onEnterBack:()=>{gsap.to("[data-scrolldown]",{opacity:0,duration:.2})}}),t&&gsap.to(".anni_logo",{scrollTrigger:{trigger:".anni",start:"top top",pin:".anni_logo",markers:!1}})})},[fadeInArray]=[document.querySelectorAll("[data-fadein]")],addFadeOnElements=function(e){if(e)for(let t=0;t<e.length;t++){let o=e[t],n=o.getBoundingClientRect().top-window.innerHeight+100;n<0&&o.classList.add("--visible")}};"pageshow scroll".split(" ").forEach(e=>{window.addEventListener(e,function(){addFadeOnElements(fadeInArray)})});const hideLogoShrink=gsap.timeline({scrollTrigger:{trigger:"[data-top-chacott]",start:"top+=10% center",end:"top+=10% center",markers:!1,invalidateOnRefresh:!0,onEnter:()=>{gsap.to("[data-logo-shrink]",{opacity:0,duration:1,ease:Power4.easeInOut})},onEnterBack:()=>{gsap.to("[data-logo-shrink]",{opacity:1,duration:1,ease:Power4.easeInOut})}}});let panels=gsap.utils.toArray("[data-section]");panels.pop(),panels.forEach((e,t)=>{gsap.timeline({scrollTrigger:{trigger:e,start:"bottom bottom",pinSpacing:!1,pin:!0,scrub:!0,markers:!1,invalidateOnRefresh:!0,onRefresh:()=>{gsap.set(e,{transformOrigin:"center "+(window.innerHeight+e.offsetHeight-window.innerHeight/2)+"px"})}}})}),window.addEventListener("resize",()=>{window.innerWidth>1023&&ScrollTrigger.refresh()}),document.addEventListener("click",function(e){const t=e.target.closest('a:not([href^="#"]):not([target]):not([href^="mailto"]):not([href^="tel"])');if(!t)return;e.preventDefault();const o=t.getAttribute("href");if(o&&""!==o){const e=o.indexOf("#"),t=-1!==e?o.substring(e):"";if(t&&"#"!==t)try{const e=document.querySelector(t);if(e)return e.scrollIntoView({behavior:"smooth",block:"start"}),!1}catch(e){console.error("Invalid hash selector:",t,e)}document.body.classList.add("fadeout"),setTimeout(function(){window.location=o},500)}return!1});const handleHash=function(){const e=window.location.hash;e?(ScrollTrigger.refresh(),setTimeout(()=>{const t=document.querySelector(e);t&&gsap.to(window,{duration:1,scrollTo:{y:t,offsetY:0},onComplete:()=>{window.history.replaceState(null,document.title,window.location.pathname+window.location.search),gsap.to("[data-scrolldown]",{opacity:0}),setTimeout(()=>{document.body.classList.remove("fadeout")},100)}})},100)):document.body.classList.remove("fadeout")};if("pageshow load".split(" ").forEach(e=>{window.addEventListener(e,handleHash)}),document.getElementById("detailspage")){document.body.classList.remove("fadeout");new Swiper(".detail_gallery",{breakpoints:{0:{slidesPerView:1.235,spaceBetween:15,allowTouchMove:!0,draggable:!0},1024:{slidesPerView:3,spaceBetween:40,draggable:!1,allowTouchMove:!1}}})}window.addEventListener("pageshow",init);